# é’‰é’‰ç¾¤èŠæœºå™¨äººå®šæ—¶æ¨é€æ¶ˆæ¯

![GitHub repo size](https://img.shields.io/github/repo-size/QInzhengk/galaxy?style=for-the-badge)
![GitHub stars](https://img.shields.io/github/stars/QInzhengk/galaxy?style=for-the-badge)
![GitHub forks](https://img.shields.io/github/forks/QInzhengk/galaxy?style=for-the-badge)
![GitHub commit activity](https://img.shields.io/github/commit-activity/m/QInzhengk/galaxy?style=for-the-badge)
![Bitbucket  issues](https://img.shields.io/github/issues-closed/QInzhengk/galaxy?style=for-the-badge)

## ğŸ“’ ç®€ä»‹

> :smiley: é€šè¿‡GitHub Actionsç»™é¡¶é¡¶ç¾¤èŠå®šæ—¶æ¨é€æ¶ˆæ¯ï¼ˆPythonï¼‰ã€‚

## ğŸ¤ [åšå®¢](https://github.com/qzkq/qzkq.github.io)

[galaxy](https://qzkq.github.io/)

## å®ä¾‹2ã€é€šè¿‡GitHub Actionsç»™é’‰é’‰ç¾¤èŠæœºå™¨äººå®šæ—¶æ¨é€æ¶ˆæ¯ï¼ˆPythonï¼‰
### 1ã€é’‰é’‰æ­¥éª¤
æ‰“å¼€é’‰é’‰ï¼Œç‚¹å‡»+å‘èµ·ç¾¤èŠï¼ˆå¦‚ä½ æœ‰å…¬å¸ï¼Œéœ€è¦æœ‰ä¸¤ä¸ªä¸æ˜¯å…¬å¸çš„å¥½å‹æ‰èƒ½åˆ›å»ºæ™®é€šç¾¤ï¼‰ï¼Œåˆ›å»ºå®Œæˆåï¼Œæ‰“å¼€ç¾¤èŠä¸­çš„è®¾ç½®ï¼Œæ™ºèƒ½ç¾¤åŠ©æ‰‹ã€‚
è¿›å…¥åˆ°æœºå™¨äººç®¡ç†é¡µé¢ï¼Œç‚¹å‡»æ·»åŠ æœºå™¨äººï¼Œè¿›å…¥æœºå™¨äººé€‰æ‹©é¡µé¢ï¼Œè¿™é‡Œé€‰æ‹©è‡ªå®šä¹‰æœºå™¨äººã€‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/16042ba005e94ae480a83dd9c65ea220.png)
éœ€è¦ç»™æœºå™¨äººä¿®æ”¹å¤´åƒå’Œåç§°ï¼Œåœ¨å®‰å…¨è®¾ç½®é‡Œé¢ï¼Œå»ºè®®æœ€å¥½æŠŠè‡ªå®šä¹‰å…³é”®å­—ä¹Ÿå‹¾é€‰ä¸Šï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œè®¾ç½®çš„æ˜¯ï¼šæ—©ä¸Šå¥½ï¼Œç„¶åå…¶ä»–çš„å¯ä»¥é»˜è®¤ï¼Œç‚¹å‡»å®Œæˆååœ¨æ–°çš„é¡µé¢æœ‰ä¸€ä¸ªwebhookï¼ˆWebhookä¸è¦æ³„éœ²åœ¨ç½‘ä¸Šï¼‰
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/d03d721b6c20482d8b6517af8ec284a3.png)
è·å–åˆ°Webhookåœ°å€åï¼Œç”¨æˆ·å¯ä»¥å‘è¿™ä¸ªåœ°å€å‘èµ·HTTP POST è¯·æ±‚ï¼Œå³å¯å®ç°ç»™è¯¥é’‰é’‰ç¾¤å‘é€æ¶ˆæ¯ã€‚

é’‰é’‰ç¾¤èŠæœºå™¨äººæœ€æ–°è§„å®šï¼š

> å‘èµ·POSTè¯·æ±‚æ—¶ï¼Œå¿…é¡»å°†å­—ç¬¦é›†ç¼–ç è®¾ç½®æˆUTF-8ã€‚
> æ¯ä¸ªæœºå™¨äººæ¯åˆ†é’Ÿæœ€å¤šå‘é€20æ¡ã€‚æ¶ˆæ¯å‘é€å¤ªé¢‘ç¹ä¼šä¸¥é‡å½±å“ç¾¤æˆå‘˜çš„ä½¿ç”¨ä½“éªŒï¼Œå¤§é‡å‘æ¶ˆæ¯çš„åœºæ™¯ (è­¬å¦‚ç³»ç»Ÿç›‘æ§æŠ¥è­¦)å¯ä»¥å°†è¿™äº›ä¿¡æ¯è¿›è¡Œæ•´åˆï¼Œé€šè¿‡markdownæ¶ˆæ¯ä»¥æ‘˜è¦çš„å½¢å¼å‘é€åˆ°ç¾¤é‡Œã€‚

ç›®å‰æ”¯æŒå‘é€çš„æ¶ˆæ¯æœ‰5ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šæ–‡æœ¬ (text)ã€é“¾æ¥ (link)ã€markdownã€ActionCardã€FeedCardã€‚ä¸ªäººä½¿ç”¨ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æœ‰ä¸¤ç§ï¼šåˆ†åˆ«æ˜¯æ–‡æœ¬å’Œé“¾æ¥ï¼Œä¼ä¸šä½¿ç”¨çš„æ—¶å€™ï¼Œå¯¹äºActionCardç±»å‹çš„ä¹Ÿæ¯”è¾ƒå¸¸ç”¨ã€‚

å…·ä½“éœ€è¦æ ¹æ®è‡ªå·±çš„åœºæ™¯è¿›è¡Œé€‰æ‹©ï¼Œä»¥ä¾¿èƒ½è¾¾åˆ°æœ€å¥½çš„å±•ç¤ºæ ·å¼ã€‚

è‡ªå®šä¹‰æœºå™¨äººå‘é€æ¶ˆæ¯æ—¶ï¼Œå¯ä»¥é€šè¿‡æ‰‹æœºå·ç æŒ‡å®šâ€œè¢«@äººåˆ—è¡¨â€ã€‚åœ¨â€œè¢«@äººåˆ—è¡¨â€é‡Œé¢çš„äººå‘˜æ”¶åˆ°è¯¥æ¶ˆæ¯æ—¶ï¼Œä¼šæœ‰@æ¶ˆæ¯æé†’ã€‚å…æ‰“æ‰°ä¼šè¯ä»ç„¶é€šçŸ¥æé†’ï¼Œé¦–å±å‡ºç°â€œæœ‰äºº@ä½ â€

#### æ–‡æœ¬TEXT

æ–‡æœ¬å‹çš„æ¶ˆæ¯ç±»å‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```
{
    "at": {
        "atMobiles":[
            "180xxxxxx"
        ],
        "atUserIds":[
            "user123"
        ],
        "isAtAll": false
    },
    "text": {
        "content":"æµ‹è¯•"
    },
    "msgtype":"text"
}

```

ä¸Šè¿°ä¸­æ¶‰åŠçš„å‚æ•°ç±»å‹åˆ†åˆ«å¦‚ä¸‹ï¼š

| **å‚æ•°**  | **å‚æ•°ç±»å‹** | **æ˜¯å¦å¿…å¡«** | **è¯´æ˜**                                                     |
| --------- | ------------ | ------------ | ------------------------------------------------------------ |
| msgtype   | String       | æ˜¯           | æ¶ˆæ¯ç±»å‹ï¼Œæ­¤æ—¶å›ºå®šä¸ºï¼štextã€‚                                 |
| content   | String       | æ˜¯           | æ¶ˆæ¯å†…å®¹ã€‚                                                   |
| atMobiles | Array        | å¦           | è¢«@äººçš„æ‰‹æœºå·ã€‚**æ³¨æ„** åœ¨contenté‡Œæ·»åŠ @äººçš„æ‰‹æœºå·ï¼Œä¸”åªæœ‰åœ¨ç¾¤å†…çš„æˆå‘˜æ‰å¯è¢«@ï¼Œéç¾¤å†…æˆå‘˜æ‰‹æœºå·ä¼šè¢«è„±æ•ã€‚ |
| atUserIds | Array        | å¦           | è¢«@äººçš„ç”¨æˆ·useridã€‚**æ³¨æ„** åœ¨contenté‡Œæ·»åŠ @äººçš„useridã€‚     |
| isAtAll   | Boolean      | å¦           | æ˜¯å¦@æ‰€æœ‰äººã€‚                                                |

#### é“¾æ¥LINK

é“¾æ¥å‹çš„æ¶ˆæ¯ç±»å‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```
{
    "msgtype": "link", 
    "link": {
        "text": "æµ‹è¯•", 
        "title": "æµ‹è¯•", 
        "picUrl": "", 
        "messageUrl": "https://www.dingtalk.com/s?__biz=MzA4NjMwMTA2Ng==&mid=2650316842&idx=1&sn=60da3ea2b29f1dcc43a7c8e4a7c97a16&scene=2&srcid=09189AnRJEdIiWVaKltFzNTw&from=timeline&isappinstalled=0&key=&ascene=2&uin=&devicetype=android-23&version=26031933&nettype=WIFI"
    }
}
```

ä¸Šè¿°ä¸­æ¶‰åŠçš„å‚æ•°ç±»å‹åˆ†åˆ«å¦‚ä¸‹ï¼š

| **å‚æ•°**   | **å‚æ•°ç±»å‹** | æ˜¯å¦å¿…å¡« | **è¯´æ˜**                                                     |
| ---------- | ------------ | -------- | ------------------------------------------------------------ |
| msgtype    | String       | æ˜¯       | æ¶ˆæ¯ç±»å‹ï¼Œæ­¤æ—¶å›ºå®šä¸ºï¼šlinkã€‚                                 |
| title      | String       | æ˜¯       | æ¶ˆæ¯æ ‡é¢˜ã€‚                                                   |
| text       | String       | æ˜¯       | æ¶ˆæ¯å†…å®¹ã€‚å¦‚æœå¤ªé•¿åªä¼šéƒ¨åˆ†å±•ç¤ºã€‚                             |
| messageUrl | String       | æ˜¯       | ç‚¹å‡»æ¶ˆæ¯è·³è½¬çš„URLï¼Œæ‰“å¼€æ–¹å¼å¦‚ä¸‹ï¼šç§»åŠ¨ç«¯ï¼Œåœ¨é’‰é’‰å®¢æˆ·ç«¯å†…æ‰“å¼€PCç«¯é»˜è®¤ä¾§è¾¹æ æ‰“å¼€å¸Œæœ›åœ¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€ï¼Œè¯·å‚è€ƒ[æ¶ˆæ¯é“¾æ¥è¯´æ˜](https://open.dingtalk.com/document/app/message-link-description#section-7w8-4c2-9az) |
| picUrl     | String       | å¦       | å›¾ç‰‡URLã€‚                                                    |

#### markdownç±»å‹

markdownçš„æ¶ˆæ¯ç±»å‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```json
{
     "msgtype": "markdown",
     "markdown": {
         "title":"æµ‹è¯•",
         "text": "#### æ­å·å¤©æ°” @150XXXXXXXX \n > 9åº¦ï¼Œè¥¿åŒ—é£1çº§ï¼Œç©ºæ°”è‰¯89ï¼Œç›¸å¯¹æ¸©åº¦73%\n > ![screenshot](https://img.alicdn.com/tfs/TB1NwmBEL9TBuNjy1zbXXXpepXa-2400-1218.png)\n > ###### 10ç‚¹20åˆ†å‘å¸ƒ [å¤©æ°”](https://www.dingtalk.com) \n"
     },
      "at": {
          "atMobiles": [
              "188XXXXXXXX"
          ],
          "atUserIds": [
              "user123"
          ],
          "isAtAll": false
      }
 }
```

ä¸Šè¿°ä¸­æ¶‰åŠçš„å‚æ•°ç±»å‹åˆ†åˆ«å¦‚ä¸‹ï¼š

| **å‚æ•°**  | **ç±»å‹** | æ˜¯å¦å¿…å¡« | **è¯´æ˜**                                                     |
| --------- | -------- | -------- | ------------------------------------------------------------ |
| msgtype   | String   | æ˜¯       | æ¶ˆæ¯ç±»å‹ï¼Œæ­¤æ—¶å›ºå®šä¸ºï¼šmarkdownã€‚                             |
| title     | String   | æ˜¯       | é¦–å±ä¼šè¯é€å‡ºçš„å±•ç¤ºå†…å®¹ã€‚                                     |
| text      | String   | æ˜¯       | markdownæ ¼å¼çš„æ¶ˆæ¯ã€‚                                         |
| atMobiles | Array    | å¦       | è¢«@äººçš„æ‰‹æœºå·ã€‚**æ³¨æ„** åœ¨textå†…å®¹é‡Œè¦æœ‰@äººçš„æ‰‹æœºå·ï¼Œåªæœ‰åœ¨ç¾¤å†…çš„æˆå‘˜æ‰å¯è¢«@ï¼Œéç¾¤å†…æˆå‘˜æ‰‹æœºå·ä¼šè¢«è„±æ•ã€‚ |
| atUserIds | Array    | å¦       | è¢«@äººçš„ç”¨æˆ·useridã€‚**æ³¨æ„** åœ¨contenté‡Œæ·»åŠ @äººçš„useridã€‚     |
| isAtAll   | Boolean  | å¦       | æ˜¯å¦@æ‰€æœ‰äººã€‚                                                |



#### æ•´ä½“è·³è½¬ActionCardç±»å‹

æ•´ä½“è·³è½¬ActionCardçš„æ¶ˆæ¯ç±»å‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```
{
    "actionCard": {
        "title": "æµ‹è¯•", 
        "text": "æµ‹è¯•", 
        "btnOrientation": "0", 
        "singleTitle" : "æµ‹è¯•",
        "singleURL" : "https://www.dingtalk.com/"
    }, 
    "msgtype": "actionCard"
}
```

ä¸Šè¿°ä¸­æ¶‰åŠçš„å‚æ•°ç±»å‹åˆ†åˆ«å¦‚ä¸‹ï¼š

| **å‚æ•°**       | **ç±»å‹** | **æ˜¯å¦å¿…å¡«** | **è¯´æ˜**                                                     |
| -------------- | -------- | ------------ | ------------------------------------------------------------ |
| msgtype        | String   | æ˜¯           | æ¶ˆæ¯ç±»å‹ï¼Œæ­¤æ—¶å›ºå®šä¸ºï¼šactionCardã€‚                           |
| title          | String   | æ˜¯           | é¦–å±ä¼šè¯é€å‡ºçš„å±•ç¤ºå†…å®¹ã€‚                                     |
| text           | String   | æ˜¯           | markdownæ ¼å¼çš„æ¶ˆæ¯ã€‚                                         |
| singleTitle    | String   | æ˜¯           | å•ä¸ªæŒ‰é’®çš„æ ‡é¢˜ã€‚**æ³¨æ„** è®¾ç½®æ­¤é¡¹å’ŒsingleURLåï¼Œbtnsæ— æ•ˆã€‚   |
| singleURL      | String   | æ˜¯           | ç‚¹å‡»æ¶ˆæ¯è·³è½¬çš„URLï¼Œæ‰“å¼€æ–¹å¼å¦‚ä¸‹ï¼šç§»åŠ¨ç«¯ï¼Œåœ¨é’‰é’‰å®¢æˆ·ç«¯å†…æ‰“å¼€PCç«¯é»˜è®¤ä¾§è¾¹æ æ‰“å¼€å¸Œæœ›åœ¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€ï¼Œè¯·å‚è€ƒ[æ¶ˆæ¯é“¾æ¥è¯´æ˜](https://open.dingtalk.com/document/app/message-link-description#section-7w8-4c2-9az) |
| btnOrientation | String   | å¦           | 0ï¼šæŒ‰é’®ç«–ç›´æ’åˆ—1ï¼šæŒ‰é’®æ¨ªå‘æ’åˆ—                               |


#### ç‹¬ç«‹è·³è½¬ActionCardç±»å‹

ç‹¬ç«‹è·³è½¬ActionCardçš„æ¶ˆæ¯ç±»å‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```
{
    "msgtype": "actionCard",
    "actionCard": {
        "title": "æµ‹è¯•", 
        "text": "æµ‹è¯•", 
        "btnOrientation": "0", 
        "btns": [
            {
                "title": "å†…å®¹ä¸é”™", 
                "actionURL": "https://www.dingtalk.com/"
            }, 
            {
                "title": "ä¸æ„Ÿå…´è¶£", 
                "actionURL": "https://www.dingtalk.com/"
            }
        ]
    }
}
```

ä¸Šè¿°ä¸­æ¶‰åŠçš„å‚æ•°ç±»å‹åˆ†åˆ«å¦‚ä¸‹ï¼š

| **å‚æ•°**       | **ç±»å‹** | æ˜¯å¦å¿…å¡« | è¯´æ˜                                                         |
| -------------- | -------- | -------- | ------------------------------------------------------------ |
| msgtype        | String   | æ˜¯       | æ­¤æ¶ˆæ¯ç±»å‹ä¸ºå›ºå®šactionCardã€‚                                 |
| title          | String   | æ˜¯       | é¦–å±ä¼šè¯é€å‡ºçš„å±•ç¤ºå†…å®¹ã€‚                                     |
| text           | String   | æ˜¯       | markdownæ ¼å¼çš„æ¶ˆæ¯ã€‚                                         |
| btns           | Array    | æ˜¯       | æŒ‰é’®ã€‚                                                       |
| title          | String   | æ˜¯       | æŒ‰é’®æ ‡é¢˜ã€‚                                                   |
| actionURL      | String   | æ˜¯       | ç‚¹å‡»æŒ‰é’®è§¦å‘çš„URLï¼Œæ‰“å¼€æ–¹å¼å¦‚ä¸‹ï¼šç§»åŠ¨ç«¯ï¼Œåœ¨é’‰é’‰å®¢æˆ·ç«¯å†…æ‰“å¼€PCç«¯é»˜è®¤ä¾§è¾¹æ æ‰“å¼€å¸Œæœ›åœ¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€ï¼Œè¯·å‚è€ƒ[æ¶ˆæ¯é“¾æ¥è¯´æ˜](https://open.dingtalk.com/document/app/message-link-description#section-7w8-4c2-9az) |
| btnOrientation | String   | å¦       | 0ï¼šæŒ‰é’®ç«–ç›´æ’åˆ—1ï¼šæŒ‰é’®æ¨ªå‘æ’åˆ—                               |

#### FeedCardç±»å‹

FeedCardçš„æ¶ˆæ¯ç±»å‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```
{
    "msgtype":"feedCard",
    "feedCard": {
        "links": [
            {
                "title": "æµ‹è¯•1", 
                "messageURL": "https://www.dingtalk.com/", 
                "picURL": "https://img.alicdn.com/tfs/TB1NwmBEL9TBuNjy1zbXXXpepXa-2400-1218.png"
            },
            {
                "title": "æµ‹è¯•2", 
                "messageURL": "https://www.dingtalk.com/", 
                "picURL": "https://img.alicdn.com/tfs/TB1NwmBEL9TBuNjy1zbXXXpepXa-2400-1218.png"
            }
        ]
    }
}
```

ä¸Šè¿°ä¸­æ¶‰åŠçš„å‚æ•°ç±»å‹åˆ†åˆ«å¦‚ä¸‹ï¼š

| **å‚æ•°**   | **ç±»å‹** | æ˜¯å¦å¿…å¡« | **è¯´æ˜**                                                     |
| ---------- | -------- | -------- | ------------------------------------------------------------ |
| msgtype    | String   | æ˜¯       | æ­¤æ¶ˆæ¯ç±»å‹ä¸ºå›ºå®šfeedCardã€‚                                   |
| title      | String   | æ˜¯       | å•æ¡ä¿¡æ¯æ–‡æœ¬ã€‚                                               |
| messageURL | String   | æ˜¯       | ç‚¹å‡»å•æ¡ä¿¡æ¯åˆ°è·³è½¬é“¾æ¥ã€‚**è¯´æ˜** PCç«¯è·³è½¬ç›®æ ‡é¡µé¢çš„æ–¹å¼ï¼Œå‚è€ƒ[æ¶ˆæ¯é“¾æ¥åœ¨PCç«¯ä¾§è¾¹æ æˆ–è€…å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€](https://open.dingtalk.com/document/app/message-link-description#section-7w8-4c2-9az)ã€‚ |
| picURL     | String   | æ˜¯       | å•æ¡ä¿¡æ¯åé¢å›¾ç‰‡çš„URLã€‚                                      |


### 2ã€Githubæ­¥éª¤
è¿™é‡Œå’Œç¬¬ä¸€ä¸ªå®ä¾‹ç±»ä¼¼ï¼Œä¸å†é‡å¤ä»‹ç»ã€‚
ä»£ç åœ°å€ï¼š[https://github.com/QInzhengk/galaxy](https://github.com/QInzhengk/galaxy)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/1d1ac2ec331a46d08c4473e152101732.png)
## â˜•  é¸£è°¢

æ„Ÿè°¢ä»¥ä¸‹å‚è€ƒçš„å¸®åŠ©ï¼š

- [https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html](https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html)
- [https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions](https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions)
- [https://github.com/datawhalechi](https://github.com/datawhalechi)
- [https://blog.csdn.net/qq_45832050/article/details/126789897](https://blog.csdn.net/qq_45832050/article/details/126789897)
- [https://blog.csdn.net/qq_45832050/article/details/122755904](https://blog.csdn.net/qq_45832050/article/details/122755904)
- [åç»­æ›´æ–°å®Œå°†ä¼šå®Œå–„è¿™ä¸€éƒ¨åˆ†ï¼Œæœ‰é—®é¢˜å¯ä»¥ç‚¹å‡»Issuesæé—®ï¼›å‡ä¸ºäº’è”ç½‘èµ„æ–™ï¼Œä¾µæƒåˆ ]()
